# vim: filetype=muttrc

set mbox_type 		= Maildir
set folder 			= "~/.local/share/mail/contact@fabiancodes.de"

set sendmail 		= "msmtp -a contact@fabiancodes.de"

set spoolfile		= "+INBOX"
set record 			= "+Sent"
set trash 			= "+Trash"
set postponed 		= "+Drafts"

set realname 		= "Fabian Specht"
set from 			= "contact@fabiancodes.de"

set signature		= "~/.config/neomutt/signature"

mailboxes 			=INBOX =Sent =Trash =Drafts =Junk

macro index S "<shell-escape>mbsync -V contact@fabiancodes.de<enter><shell-escape>notmuch new<enter>" "sync email"

macro index \Cf "<enter-command>unset wait_key<enter><shell-escape>read -p 'Enter a search term to find with notmuch: ' x; echo \$x >~/.cache/mutt_terms<enter><limit>~i \"\`notmuch search --output=messages \$(cat ~/.cache/mutt_terms) | head -n 600 | perl -le '@a=<>;s/\^id:// for@a;$,=\"|\";print@a' | perl -le '@a=<>; chomp@a; s/\\+/\\\\+/ for@a;print@a' \`\"<enter>" "show only messages matching a notmuch pattern"
